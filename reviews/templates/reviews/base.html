{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WorkInside</title>

    <link rel="stylesheet" href="{% static 'reviews/workinside.css' %}">
    <link rel="icon" type="image/png" href="{% static 'reviews/workinside_icon.png' %}">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<nav class="navbar">
    <a href="{% url 'home' %}" class="logo">
        <img src="{% static 'reviews/workinside_logo_v2.png' %}" alt="WorkInside Logo" class="logo-img">
        <span class="logo-text">WorkInside</span>
    </a>

    <a href="{% url 'review_form' %}" class="leave-btn">Leave Review</a>
</nav>

<div class="page-content">
    {% block content %}{% endblock %}
</div>

<footer class="footer">
    <p>© 2025 WorkInside</p>
    <div class="footer-links">
        <a href="/reviews/privacy/">Privacy</a>
        <a href="/reviews/terms/">Terms</a>
        <a href="/reviews/cookies/">Cookies</a>
        <a href="/reviews/contact/">Contact</a>
    </div>
</footer>

<!-- ⭐ GOOGLE AUTOCOMPLETE FUNCTION (Global) -->
<script>
function initAutocomplete() {
    const input = document.getElementById("hotel-search");
    if (!input) return;

    const autocomplete = new google.maps.places.Autocomplete(input, {
        types: ["establishment"],
        fields: ["name", "formatted_address", "geometry", "address_components"]
    });

    autocomplete.addListener("place_changed", () => {
        const place = autocomplete.getPlace();
        if (!place) return;

        document.getElementById("hotel_name").value = place.name || "";
        document.getElementById("hotel_address").value = place.formatted_address || "";
        document.getElementById("hotel_lat").value = place.geometry?.location?.lat() || "";
        document.getElementById("hotel_lon").value = place.geometry?.location?.lng() || "";

        let country = "";
        (place.address_components || []).forEach(c => {
            if (c.types.includes("country")) {
                country = c.long_name;
            }
        });
        document.getElementById("hotel_country").value = country || "";
    });
}
</script>

<!-- ⭐ GOOGLE API LOADS ONLY ONCE HERE -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAQHMMhIQ3zkuWsniWhIAupw_a7PfL7qbQ&libraries=places&callback=initAutocomplete" async defer></script>

{% block extra_scripts %}{% endblock %}

</body>
</html>
